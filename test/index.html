<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>3D Tree Scene</title>
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="bg-container">
      <div class="projection-container">
        <model-viewer
            id="treeModel"
            src="../assets/lowpoly_tree.glb"
            camera-controls
            auto-rotate
            environment-image="neutral"
            exposure="1"
            shadow-intensity="1"
            style="width: 100%; height: 100%; background-color: black;"
        ></model-viewer>
        <div class="color-overlay" id="colorOverlay"></div>
      </div>
    </div>

    <div class="indicator-buttons">
      <button class="indicator red" onclick="setTreeColor('red')"></button>
      <button class="indicator orange" onclick="setTreeColor('orange')"></button>
      <button class="indicator green" onclick="setTreeColor('green')"></button>
    </div>

    <script>
        function setTreeColor(color) {
        const viewer = document.querySelector('#treeModel');
        const colorOverlay = document.getElementById('colorOverlay');
        let rgba = [1, 1, 1, 1];
        let overlayColor = 'transparent';

        switch (color) {
            case 'red':
            rgba = [1, 0, 0, 1];
            overlayColor = 'rgba(255, 0, 0, 0.3)';
            break;
            case 'orange':
            rgba = [1, 0.65, 0, 1];
            overlayColor = 'rgba(255, 165, 0, 0.3)';
            break;
            case 'green':
            rgba = [0, 1, 0, 1];
            overlayColor = 'rgba(0, 255, 0, 0.3)';
            break;
        }

        // âœ… Change material color if already loaded
        if (viewer.model && viewer.model.materials && viewer.model.materials.length > 0) {
            const mat = viewer.model.materials[0];
            mat.pbrMetallicRoughness.setBaseColorFactor(rgba);
        }

        colorOverlay.style.backgroundColor = overlayColor;
        }
    </script>
  </body>
</html>